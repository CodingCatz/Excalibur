# Excalibur — 遊戲企劃工作室

一套網頁版遊戲企劃工具（PWA），涵蓋遊戲設計文件、流程圖、對話樹、數值表、資源清單、本地化管理、關卡佈局、UI 線框圖等功能。

線上使用：https://codingcatz.github.io/Excalibur/

---

## 功能總覽

| 模組 | 說明 |
|------|------|
| [設計文件 (GDD)](#設計文件-gdd) | 富文本遊戲設計文件編輯器 |
| [流程圖 / 狀態機](#流程圖--狀態機) | 節點式流程圖與狀態機編輯器 |
| [對話樹](#對話樹) | 分支對話系統編輯器 + 模擬器 |
| [數值表](#數值表) | 試算表式遊戲數據管理 |
| [資源清單](#資源清單) | 遊戲美術/音效資源追蹤管理 |
| [本地化管理](#本地化管理) | 多語系翻譯管理 |
| [關卡佈局](#關卡佈局) | 節點圖 / 地圖標記 / 網格地圖 |
| [UI 線框圖](#ui-線框圖) | 低保真 UI 草圖編輯器 |

---

## 設計文件 (GDD)

富文本遊戲設計文件編輯器，支援多種文件模板。

### 使用方式

- 輸入 `/` 可開啟快速指令選單
- 工具列支援標題、粗體、斜體、列表、引用等格式
- 📊 **表格** — 插入可編輯表格
- ⚙ **機制區塊** / 📝 **設計筆記** / 📊 **參數表** — 插入特殊區塊

### 文件模板

| 模板 | 用途 |
|------|------|
| 完整 GDD | 涵蓋概述、核心玩法、故事、關卡、UI、音效、技術規格的完整設計文件 |
| 單頁企劃書 | 一頁式遊戲概念提案，適合快速 Pitch |
| 系統設計書 | 針對特定遊戲系統（戰鬥、經濟等）的深入設計規格 |
| 關卡設計書 | 定義單一關卡的佈局、敵人配置、獎勵、節奏設計 |
| 角色設計書 | 角色基本資料、性格、技能、數值、視覺設計 |
| UI/UX 規格書 | 畫面流程、HUD、選單設計、響應式和無障礙設計 |

### 特殊區塊

- **狀態標記**：已確認 / 討論中 / 待修改
- **修改紀錄**：追蹤文件變更歷史
- **參數表**：內嵌數值表格
- **流程圖嵌入**：引用專案內的流程圖
- **對話樹嵌入**：引用專案內的對話樹
- **跨文件引用**：連結其他 GDD 文件

### 匯入匯出

- 匯入：Markdown、JSON
- 匯出：Markdown、JSON

---

## 流程圖 / 狀態機

節點式流程圖與狀態機編輯器，適合設計遊戲流程、AI 行為、UI 導航等。

### 使用方式

- 點擊圖示新增節點（開始、結束、流程、判斷、狀態、子流程、備註）
- 從節點邊緣拖曳建立連線
- 右鍵點擊節點或連線可刪除、編輯
- 📐 **自動排版** — 重新排列所有節點
- 📋 **模板** — 快速載入預設流程
- 💻 **Mermaid** — 檢視 / 複製 Mermaid 語法

### 節點類型

| 節點 | 用途 |
|------|------|
| 開始 | 流程入口 |
| 結束 | 流程出口 |
| 流程 | 一般處理步驟 |
| 判斷 | 條件分支（是/否） |
| 狀態 | 狀態機的狀態節點 |
| 子流程 | 引用其他流程圖 |
| 備註 | 標注說明 |

### 連線

- 支援圓角折線、貝茲曲線、直線、階梯四種線型
- 可加入標籤文字
- 支援雙向連線

### 流程模板

遊戲主流程、戰鬥流程、UI 導航、AI 狀態機、對話流程、新手引導、商店流程

### 匯入匯出

- 匯入：Mermaid、JSON
- 匯出：Mermaid、SVG、PNG、JSON

---

## 對話樹

分支對話系統編輯器，支援角色管理、變數系統和對話模擬。

### 使用方式

- 點擊圖示新增節點（入口、對話、選項、條件、動作、隨機、出口）
- 從節點底部拖曳連線到其他節點
- 點擊節點開啟右側屬性面板編輯內容
- 📐 **自動排版** — 重新排列所有節點
- 📋 **套用模板**快速建立常見對話結構
- 🖱 **右鍵**點擊節點或連線可刪除、編輯標籤、切換線型
- 📦 **變數管理** — 新增/編輯對話變數（數值、文字、布林）

### 節點類型

| 節點 | 用途 |
|------|------|
| 入口 | 對話起始點 |
| 出口 | 對話結束點 |
| 對話 | 角色說話，可指定角色和表情 |
| 選項 | 玩家選擇分支，可設定條件和花費 |
| 條件 | 根據變數值判斷走向 |
| 動作 | 修改變數、觸發事件 |
| 隨機 | 隨機選擇分支 |

### 角色管理

- 新增角色並指定名稱
- 連結資源清單中的美術資源
- 12 種表情選項（平靜、開心、難過、生氣、驚訝等）

### 變數系統

- 支援數值、文字、布林三種變數類型
- 可設定預設值和描述
- 可引用數據表欄位
- 條件節點使用變數做分支判斷

### 對話模擬器

- 模擬實際對話流程
- 即時顯示變數狀態
- 支援前進、後退、重新開始
- 多入口選擇
- 動作日誌和對話歷程

### 對話模板

NPC 商店對話、支線任務、分歧劇情、教學引導

### 匯入匯出

- 匯入：Mermaid、JSON
- 匯出：Mermaid、SVG、PNG、Markdown、引擎 JSON（對話格式）、JSON

---

## 數值表

試算表式遊戲數據管理，支援公式計算、成長曲線和多種欄位類型。

### 使用方式

- ＋ 新增資料列
- 📊 新增欄位（支援文字、數字、公式、選項、引用等類型）
- ⬆⬇ 匯入 / 匯出 CSV 檔案
- 公式欄位支援 mathjs 語法，可引用同列其他欄位

### 欄位類型

| 類型 | 說明 |
|------|------|
| 文字 | 一般文字輸入 |
| 數字 | 數值輸入 |
| 選項 | 下拉選單（自訂選項列表） |
| 公式 | 自動計算（mathjs 語法） |
| 引用 | 引用其他數據表的資料列 |
| 成長曲線 | 視覺化數值成長設定 |

### 成長曲線

- 支援線性、指數、對數、多項式、自定義曲線
- 即時預覽圖表
- 設定等級範圍和範例數值

### 進階功能

- 復原/重做
- 批次選取、編輯、刪除
- 分組顯示
- 搜尋過濾

### 表格模板

角色屬性表、武器數據、怪物列表、道具表、技能表、任務表、成就表、商店商品表、關卡數據表等

### 匯入匯出

- 匯入：CSV、JSON
- 匯出：CSV、Markdown、Unity C# Schema、JSON

---

## 資源清單

遊戲美術、音效、動畫等資源追蹤管理工具。

### 使用方式

- ＋ 新增資源條目，可選類別（美術、音效、動畫等）
- 🔍 **篩選** — 依類別或狀態快速過濾
- **狀態流程**：計畫中 → 進行中 → 審核中 → 已通過 → 已整合

### 資源類別

角色美術、場景美術、UI 美術、圖示、動畫、特效、背景音樂、音效、語音、影片、字型、預製件

### 資源屬性

- 名稱、類別、狀態、優先級（高/中/低）
- 負責人指派
- 標籤系統
- 備註
- 檔案路徑
- 豐富的後設資料（依類別不同，如規格、美術方向、音訊參數、效能指標等）

### 儀表板

- 資源總數與完成率
- 按狀態、類型、負責人、優先級統計
- 視覺化進度圖表

### 匯入匯出

- 匯入：JSON
- 匯出：JSON、Markdown

---

## 本地化管理

多語系翻譯管理工具，支援分類、比對模式和翻譯進度追蹤。

### 使用方式

- ＋ 新增翻譯鍵，可選分類（ui / dialogue / quest…）
- 🌐 新增語系，可選預設或自訂語系代碼
- 🔄 **同步 Key** — 掃描同專案的對話樹與數值表，自動匯入尚未建立的翻譯鍵
- 📊 **翻譯進度** — 檢視各語系翻譯完成率與缺翻數量

### 翻譯狀態

缺少翻譯 → 草稿 → 已翻譯 → 已審核 → 定稿

### 進階功能

- 比對模式（並列對比兩個語系）
- 設定主語系（雙擊語系欄頭）
- 分類過濾和狀態過濾
- 搜尋翻譯鍵

### 匯入匯出

- 匯入：JSON（單一語系）
- 匯出：個別語系 JSON、全部匯出

---

## 關卡佈局

三種模式：節點圖、地圖標記、網格地圖。

### 節點圖模式

- 從工具列點擊圖示新增房間節點
- 拖曳節點邊緣的連接點建立通道
- 節點類型：房間、起點、Boss、商店、密室、出口、敵人、物品、NPC、觸發器、備註
- 可編輯節點屬性（類型、難度、標籤）
- 預設關卡模板（地下城、世界地圖、城鎮等）

### 地圖標記模式

- 點擊 POI 按鈕後在地圖上點擊放置標記
- 點擊區域按鈕後在地圖上拖曳畫出範圍
- 上傳背景圖作為地圖底圖
- Alt+拖曳或中鍵拖曳平移，滾輪縮放

### 網格地圖模式

- 選擇色塊後在格線上點擊或拖曳繪製
- 切換橡皮擦模式清除格子
- 油漆桶工具填滿連續同色區域
- 自訂調色盤和圖層系統
- 支援實體放置（敵人、物品、NPC、觸發器）
- 可上傳圖片作為自定義 Tile
- Alt+拖曳或中鍵拖曳平移，滾輪縮放

### 匯入匯出

- 匯入：JSON
- 匯出：JSON

---

## UI 線框圖

低保真 UI 草圖編輯器，快速繪製遊戲介面原型。

### 使用方式

- 點擊或拖拽圖示到畫布新增 UI 元件
- 選取元件後拖拽邊角調整大小
- 選取元件後在右側面板編輯屬性

### UI 元件

| 元件 | 用途 |
|------|------|
| 按鈕 | 可點擊按鈕 |
| 文字 | 靜態文字標籤 |
| 輸入框 | 文字輸入區域 |
| 圖片 | 圖片占位區 |
| 列表 | 列表項目 |
| 導航列 | 頂部導航列 |
| Tab 列 | 底部分頁列 |
| 容器 | 群組容器 |

### 畫板預設

iPhone (375×812)、Android (360×800)、iPad (768×1024)、Desktop (1280×800)

### 匯入匯出

- 匯入：JSON
- 匯出：PNG、Markdown（元件清單）、JSON

---

## 雲端備份與還原

### 備份方式

- 側邊欄點擊 ☁ 雲端備份按鈕，將當前專案上傳至 Google Drive
- 首頁專案清單的 ⋮ 選單也可觸發雲端備份
- 首次備份會在 Google Drive 建立「Excalibur Backups」資料夾
- 編輯內容會自動存到瀏覽器本地（3 秒防抖），雲端備份需手動觸發

### 從雲端還原

1. 首頁點擊「從雲端還原」按鈕
2. 登入 Google 帳號（首次使用需授權）
3. 選擇要還原的專案
4. 選擇版本後確認還原

### 切換備份資料夾

- 還原對話框標題旁的 📁 資料夾圖示 → 開啟 Google Picker 選擇新的備份位置
- 變更後，新的備份會儲存到選擇的資料夾

### 搬移專案

- 進入專案的版本列表 → 點擊 📤 搬移圖示
- 選擇目標資料夾，所有版本檔案會逐一搬移至新位置

### 版本歷史

- 側邊欄點擊版本歷史按鈕，檢視該專案的所有雲端備份版本
- 可選擇任一歷史版本進行還原

---

## 通用功能

### 專案管理

- 新增空白專案或使用全模板示範專案
- Google Drive 雲端備份
- ZIP 打包匯出/匯入
- 從雲端還原專案

### 資料儲存

- 所有編輯內容即時自動儲存到瀏覽器 IndexedDB
- 可手動備份到 Google Drive
- 離線可用（PWA）

### 搜尋

- `⌘K`（Mac）/ `Ctrl+K`（Windows）快速搜尋文件

### 匯出格式

除各模組專屬匯出外，還支援：
- 全專案合併 Markdown
- ZIP 打包（全專案）

### 多語系

介面支援繁體中文、English、日本語

---

## 技術資訊

- React 18 + TypeScript + Vite
- PWA（離線支援）
- Google Drive API 雲端同步
- 開源前端，資料完全儲存於使用者端
