import{c as P,cN as U,bH as T,aF as F,aG as G,aB as V,aH as H,r as E,j as s,S as W,I as A,aN as $,ar as B,c9 as K,cO as Y,cP as Q,cQ as J,aM as I,aP as M,aK as X}from"./index-BO31ZqPg.js";const Z=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],ce=P("redo-2",Z);const ee=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],le=P("undo-2",ee);var N={exports:{}},R={};var O;function te(){if(O)return R;O=1;var t=U();function l(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var h=typeof Object.is=="function"?Object.is:l,v=t.useState,S=t.useEffect,f=t.useLayoutEffect,i=t.useDebugValue;function y(r,n){var u=n(),m=v({inst:{value:u,getSnapshot:n}}),a=m[0].inst,e=m[1];return f(function(){a.value=u,a.getSnapshot=n,x(a)&&e({inst:a})},[r,u,n]),S(function(){return x(a)&&e({inst:a}),r(function(){x(a)&&e({inst:a})})},[r]),i(u),u}function x(r){var n=r.getSnapshot;r=r.value;try{var u=n();return!h(r,u)}catch{return!0}}function d(r,n){return n()}var o=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:y;return R.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:o,R}var z;function re(){return z||(z=1,N.exports=te()),N.exports}var D={exports:{}},k={};var q;function ne(){if(q)return k;q=1;var t=U(),l=re();function h(d,o){return d===o&&(d!==0||1/d===1/o)||d!==d&&o!==o}var v=typeof Object.is=="function"?Object.is:h,S=l.useSyncExternalStore,f=t.useRef,i=t.useEffect,y=t.useMemo,x=t.useDebugValue;return k.useSyncExternalStoreWithSelector=function(d,o,r,n,u){var m=f(null);if(m.current===null){var a={hasValue:!1,value:null};m.current=a}else a=m.current;m=y(function(){function p(g){if(!c){if(c=!0,j=g,g=n(g),u!==void 0&&a.hasValue){var w=a.value;if(u(w,g))return b=w}return b=g}if(w=b,v(j,g))return w;var C=n(g);return u!==void 0&&u(w,C)?(j=g,w):(j=g,b=C)}var c=!1,j,b,_=r===void 0?null:r;return[function(){return p(o())},_===null?void 0:function(){return p(_())}]},[o,r,n,u]);var e=S(d,m[0],m[1]);return i(function(){a.hasValue=!0,a.value=e},[e]),x(e),e},k}var L;function ae(){return L||(L=1,D.exports=ne()),D.exports}var se=ae();const fe=T(se),oe={gdd:I,flow:J,dialogue:Q,table:Y,wireframe:K};function de({docTypes:t,routePath:l,defaultDocType:h}){const{id:v}=F(),S=G(),f=V(),{documents:i,create:y}=H(),[x,d]=E.useState(""),o=E.useMemo(()=>{const e=i.filter(c=>t.includes(c.type));if(!x.trim())return e;const p=x.trim().toLowerCase();return e.filter(c=>c.title.toLowerCase().includes(p))},[i,t,x]);function r(e){const p=new Set(a.map(j=>j.title));if(!p.has(e))return e;let c=2;for(;p.has(`${e}-${c}`);)c++;return`${e}-${c}`}async function n(){if(!v)return;const e=r(x.trim()||f("doc.untitled")),p=await y(v,h,e);d("");const c=M[p.type]??l;S(`/project/${v}/${c}/${p.id}`)}function u(e,p){if(!v)return;const c=M[p]??l;S(`/project/${v}/${c}/${e}`)}const m=oe[l]??I,a=i.filter(e=>t.includes(e.type));return s.jsxs("div",{className:"mx-auto flex h-full w-full max-w-lg flex-col p-4",children:[s.jsxs("div",{className:"relative mb-3 shrink-0",children:[s.jsx(W,{className:"pointer-events-none absolute left-2.5 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(A,{className:$("pl-9",o.length===0&&"pr-10"),placeholder:f("table.search"),value:x,onChange:e=>d(e.target.value),onKeyDown:e=>e.key==="Enter"&&o.length===0&&n()}),o.length===0&&s.jsx("button",{className:$("absolute right-1 top-1/2 flex size-7 -translate-y-1/2 items-center justify-center rounded-md transition-colors","bg-primary text-primary-foreground hover:bg-primary/90"),onClick:n,children:s.jsx(B,{className:"size-4"})})]}),o.length===0?s.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:a.length===0?f("doc.emptyHint"):f("doc.noMatch")}):s.jsx("div",{className:"flex min-h-0 flex-1 flex-col gap-1 overflow-y-auto pb-4",children:o.map(e=>s.jsxs("button",{className:"group flex w-full shrink-0 items-center gap-2 rounded-lg border px-3 py-2.5 text-left text-sm transition-colors hover:bg-accent/50",onClick:()=>u(e.id,e.type),children:[s.jsx(m,{className:"size-4 shrink-0 text-muted-foreground"}),s.jsx("span",{className:"min-w-0 flex-1 truncate",children:e.title}),s.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(e.updatedAt).toLocaleDateString()})]},e.id))})]})}function me({status:t}){const l=V();return s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-background/80 backdrop-blur-sm",onPointerDown:h=>h.stopPropagation(),onClick:h=>h.stopPropagation(),children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(X,{className:"size-4 animate-spin"}),s.jsx("span",{children:l(t==="saving"?"common.saving":"common.loading")})]})})}const ue=500;function pe(t,l){const h=H(i=>i.open),[v,S]=E.useState("idle"),f=E.useRef(void 0);return E.useEffect(()=>{if(!t)return;let i=!1;return(async()=>f.current&&f.current!==t&&(S("saving"),await l(),i)||(S("loading"),await h(t),!i&&(await new Promise(y=>setTimeout(y,ue)),!i&&(f.current=t,S("idle")))))(),()=>{i=!0}},[t]),v}export{de as D,ce as R,me as S,le as U,fe as a,re as r,pe as u,se as w};
