import{c as Q,aZ as me,aB as W,bL as xe,bM as ue,r as h,j as e,aD as P,B as y,bN as se,a$ as z,b0 as K,b1 as D,bO as he,bP as fe,bQ as F,bR as pe,aI as ge,aJ as je,bS as ye,bT as be,b6 as J,b7 as H,bU as Ce,b8 as V,ba as w,bb as $,I as Ne,aF as ve,aH as ke,aC as we,bV as te,bW as U,bc as Y,bX as Me,ar as Le,bY as Se,bZ as ze}from"./index-BO31ZqPg.js";import{u as Ke,I as De,T as Ee}from"./useAutoSave-CfhZAdWB.js";import{L as Ie}from"./layers-DmA3btjA.js";import{I as Z}from"./i18n-BculLh7l.js";import{T as Te}from"./ToolbarSearch-CLAh0rai.js";import{F as Ae,C as Fe}from"./funnel-CqB9476H.js";import{C as $e}from"./chart-column-DBcOFAjW.js";import"./useReadmeHelp-Dp5zdwnQ.js";const Re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ie=Q("circle-alert",Re);const _e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Be=Q("globe",_e);const Oe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ae=Q("pen-line",Oe),q=me()((t,i)=>({locales:[],baseLocale:"zh-TW",entries:new Map,meta:new Map,customCategories:[],filterCategory:"all",filterStatus:"all",filterSearch:"",visibleLocales:new Set,setBaseLocale:a=>t(n=>n.locales.includes(a)?{baseLocale:a}:n),addLocale:a=>t(n=>({locales:n.locales.includes(a)?n.locales:[...n.locales,a]})),removeLocale:a=>t(n=>{const l=new Map(n.entries);for(const[c,s]of l){const m=new Map(s);m.delete(a),l.set(c,m)}return{locales:n.locales.filter(c=>c!==a),entries:l}}),setEntry:(a,n,l)=>t(c=>{const s=new Map(c.entries),m=new Map(s.get(a)??new Map);return m.set(n,l),s.set(a,m),{entries:s}}),addKey:(a,n="ui")=>t(l=>{if(l.entries.has(a))return l;const c=new Map(l.entries);c.set(a,new Map);const s=new Map(l.meta);return s.set(a,{category:n,status:"draft"}),{entries:c,meta:s}}),removeKey:a=>t(n=>{const l=new Map(n.entries);l.delete(a);const c=new Map(n.meta);return c.delete(a),{entries:l,meta:c}}),updateMeta:(a,n)=>t(l=>{const c=new Map(l.meta),s=c.get(a);return s&&c.set(a,{...s,...n}),{meta:c}}),addCategory:a=>t(n=>n.customCategories.includes(a)?n:{customCategories:[...n.customCategories,a]}),removeCategory:a=>t(n=>({customCategories:n.customCategories.filter(l=>l!==a)})),setFilterCategory:a=>t({filterCategory:a}),setFilterStatus:a=>t({filterStatus:a}),setFilterSearch:a=>t({filterSearch:a}),toggleLocaleVisibility:a=>t(n=>{const l=new Set(n.visibleLocales);return l.has(a)?l.delete(a):l.add(a),{visibleLocales:l}}),load:(a,n,l,c)=>{const s=new Map,m=new Map;for(const u of l){const f=new Map;if(f.set(n,u.value),u.translations)for(const[r,g]of Object.entries(u.translations))f.set(r,g);s.set(u.key,f),m.set(u.key,{category:u.category,context:u.context,maxLength:u.maxLength,status:u.status})}t({locales:a,baseLocale:n,entries:s,meta:m,customCategories:c??[]})},importLocale:(a,n)=>{const l=i(),c=new Map(l.entries),s=new Map(l.meta);let m=0,u=0;for(const[r,g]of Object.entries(n)){c.has(r)?u++:(c.set(r,new Map),s.set(r,{category:"ui",status:"translated"}),m++);const d=new Map(c.get(r));d.set(a,g),c.set(r,d)}const f=l.locales.includes(a)?l.locales:[...l.locales,a];return t({entries:c,meta:s,locales:f}),{added:m,updated:u}},exportLocale:a=>{const{entries:n}=i(),l={};for(const[c,s]of n){const m=s.get(a);m!=null&&(l[c]=m)}return l},reset:()=>t({locales:[],baseLocale:"zh-TW",entries:new Map,meta:new Map,customCategories:[],filterCategory:"all",filterStatus:"all",filterSearch:"",visibleLocales:new Set})}));function Pe(){const{entries:t,meta:i,filterCategory:a,filterStatus:n,filterSearch:l,locales:c,baseLocale:s}=q(),m=[];for(const[u,f]of t){const r=i.get(u);if(!(a!=="all"&&r?.category!==a)){if(n==="missing"){if(!c.some(d=>!f.get(d)))continue}else if(n!=="all"&&r?.status!==n)continue;if(l){const g=l.toLowerCase();if(!u.toLowerCase().includes(g)&&!(f.get(s)??"").toLowerCase().includes(g))continue}m.push(u)}}return m.sort()}const ne=90;function oe(t,i){return i&&t.startsWith(`${i}.`)?t.slice(i.length+1):t}function le(t){t.style.height="auto",t.style.height=`${t.scrollHeight}px`}function Je(){const t=W(),i=xe(),a=ue(),{locales:n,baseLocale:l,entries:c,meta:s,setEntry:m,removeKey:u,setBaseLocale:f}=q(),r=Pe(),[g,d]=h.useState(0),[C,R]=h.useState(!1),G=n.length>0?(g%n.length+n.length)%n.length:0,N=n[G]??l,_=h.useCallback(()=>{d(x=>(x-1+n.length)%n.length)},[n.length]),B=h.useCallback(()=>{d(x=>(x+1)%n.length)},[n.length]),I=h.useMemo(()=>C?n:N===l?[l]:[l,N],[C,n,l,N]),T=h.useCallback(async x=>{await i({title:t("i18n.deleteKeyConfirm"),description:x,variant:"destructive"})&&u(x)},[i,u,t]),O=a!=="desktop"&&a!=="tablet",A=r.length===0;return e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"hidden md:flex flex-1 flex-col overflow-y-auto overflow-x-hidden",children:A?e.jsx("p",{className:"py-12 text-center text-sm text-muted-foreground",children:t("i18n.empty")}):e.jsxs("table",{className:"w-full text-sm",style:{tableLayout:"fixed"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:140}}),I.map(x=>e.jsx("col",{},x)),e.jsx("col",{style:{width:32}})]}),e.jsx("thead",{className:"sticky top-0 z-10 bg-background",children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-muted-foreground",children:t("i18n.key")}),I.map(x=>e.jsxs("th",{className:"px-2 py-1.5 text-left text-xs font-medium text-muted-foreground",children:[x,x===l&&" ★"]},x)),e.jsx("th",{})]})}),e.jsx("tbody",{className:"divide-y",children:r.map(x=>{const M=c.get(x),j=s.get(x);return e.jsxs("tr",{className:"group hover:bg-accent/30",children:[e.jsxs("td",{className:"px-2 py-1 align-top",children:[j&&e.jsx(P,{variant:"secondary",className:"text-[9px] h-4 px-1 mb-0.5",children:j.category}),e.jsx("code",{className:"text-xs break-all block",children:oe(x,j?.category)})]}),I.map(b=>{const o=M?.get(b)??"",p=!o&&b!==l;return e.jsx("td",{className:"px-1 py-0.5 align-top",children:e.jsx(ce,{value:o,onChange:v=>m(x,b,v),placeholder:p?t("i18n.missing"):"",isMissing:p})},b)}),e.jsx("td",{className:"px-1 py-1 align-top",children:e.jsx(y,{variant:"ghost",size:"icon",className:"size-6 opacity-0 group-hover:opacity-100",onClick:()=>T(x),children:e.jsx(se,{className:"size-3"})})})]},x)})})]})}),e.jsx("div",{className:"md:hidden flex-1 overflow-y-auto",children:A?e.jsx("p",{className:"py-12 text-center text-sm text-muted-foreground",children:t("i18n.empty")}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sticky top-0 z-10 flex border-b bg-background",children:[e.jsx("div",{className:"shrink-0 border-r px-2 py-1.5 text-xs font-medium text-muted-foreground",style:{width:ne},children:t("i18n.key")}),e.jsxs("div",{className:"flex-1 px-2 py-1.5 text-xs font-medium text-muted-foreground",children:[N,N===l&&" ★"]})]}),r.map(x=>{const M=c.get(x),j=s.get(x),b=M?.get(N)??"",o=!b&&N!==l;return e.jsxs("div",{className:"flex border-b",children:[e.jsxs("div",{className:"shrink-0 border-r bg-background px-2 py-1.5",style:{width:ne},children:[j&&e.jsx(P,{variant:"secondary",className:"text-[9px] h-4 px-1 mb-0.5",children:j.category}),e.jsx("code",{className:"text-[11px] break-all block leading-tight",children:oe(x,j?.category)})]}),e.jsxs("div",{className:"flex-1 min-w-0 px-1.5 py-1 flex items-start gap-1",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(ce,{value:b,onChange:p=>m(x,N,p),placeholder:o?t("i18n.missing"):"",isMissing:o})}),e.jsx(y,{variant:"ghost",size:"icon",className:"size-5 shrink-0 mt-0.5",onClick:()=>T(x),children:e.jsx(se,{className:"size-3"})})]})]},x)})]})}),e.jsxs("div",{className:"flex items-center gap-2 border-t px-3 py-1.5 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"shrink-0",children:[r.length," ",t("i18n.keys")]}),e.jsx("div",{className:"flex items-center gap-1 overflow-x-auto",children:n.map((x,M)=>{const j=x===l,b=x===N,o=C||b||j;return e.jsxs(z,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(P,{variant:b?"default":o?"secondary":"outline",className:`text-[10px] shrink-0 cursor-pointer transition-opacity ${o?"":"opacity-40"}`,onClick:()=>d(M),onDoubleClick:()=>f(x),children:[x,j&&" ★"]})}),e.jsx(D,{side:"top",className:"text-xs",children:t(j?"i18n.baseLocale":"i18n.setBaseLocaleHint")})]},x)})}),e.jsxs("div",{className:"ml-auto flex items-center gap-1",children:[!C&&n.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(y,{variant:"ghost",size:"icon",className:"size-6",onClick:_,children:e.jsx(he,{className:"size-3.5"})}),e.jsx(y,{variant:"ghost",size:"icon",className:"size-6",onClick:B,children:e.jsx(fe,{className:"size-3.5"})})]}),!O&&e.jsxs(e.Fragment,{children:[e.jsx(F,{orientation:"vertical",className:"mx-0.5 h-4"}),e.jsxs(z,{children:[e.jsx(K,{asChild:!0,children:e.jsx("button",{className:`rounded p-1 transition-colors ${C?"bg-accent text-accent-foreground":"hover:bg-accent hover:text-foreground"}`,onClick:()=>R(x=>!x),children:e.jsx(Ie,{className:"size-3.5"})})}),e.jsx(D,{side:"top",className:"text-xs",children:t(C?"i18n.compareMode":"i18n.showAll")})]})]})]})]})]})}function ce({value:t,onChange:i,placeholder:a,isMissing:n}){const[l,c]=h.useState(!1),[s,m]=h.useState(t),u=h.useRef(null);return h.useEffect(()=>{m(t)},[t]),h.useEffect(()=>{l&&u.current&&(u.current.focus(),le(u.current))},[l]),l?e.jsx("textarea",{ref:u,className:"w-full rounded border bg-background px-1.5 py-0.5 text-sm resize-none overflow-hidden",rows:1,value:s,onChange:f=>{m(f.target.value),le(f.target)},onBlur:()=>{c(!1),s!==t&&i(s)},onKeyDown:f=>{f.key==="Escape"&&(m(t),c(!1)),f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),f.target.blur())}}):e.jsx("div",{className:`min-h-[28px] cursor-text whitespace-pre-wrap break-words rounded px-1.5 py-0.5 text-sm hover:bg-muted/50 ${n?"border border-dashed border-yellow-500/50":""}`,onClick:()=>c(!0),children:t||e.jsxs("span",{className:"flex items-center gap-1 text-muted-foreground text-xs",children:[n&&e.jsx(ie,{className:"size-3 text-yellow-500"}),a]})})}function He({onJumpToMissing:t}){const i=W(),{locales:a,baseLocale:n,entries:l,meta:c}=q(),s=h.useMemo(()=>{const r=l.size;return a.map(g=>{let d=0;for(const[,C]of l)C.get(g)&&d++;return{locale:g,total:r,translated:d,missing:r-d,percent:r>0?Math.round(d/r*100):100}})},[a,l]),m=h.useMemo(()=>{const r=new Map;for(const[,g]of c){const d=g.category||"ui";r.set(d,(r.get(d)??0)+1)}return[...r.entries()].sort((g,d)=>d[1]-g[1])},[c]),u=l.size,f=s.reduce((r,g)=>r+g.missing,0);return a.length===0?null:e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Be,{className:"size-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:u}),e.jsx("span",{className:"text-muted-foreground",children:i("i18n.keys")})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"font-medium",children:a.length}),e.jsx("span",{className:"text-muted-foreground",children:i("i18n.localesCount")})]}),f>0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-yellow-600 dark:text-yellow-500",children:[e.jsx(ie,{className:"size-4"}),e.jsx("span",{className:"font-medium",children:f}),e.jsx("span",{children:i("i18n.missing")})]}),f===0&&u>0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-green-600 dark:text-green-500",children:[e.jsx(pe,{className:"size-4"}),e.jsx("span",{children:i("i18n.dashboard.allComplete")})]})]}),e.jsx("div",{className:"space-y-2",children:s.map(r=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"font-medium",children:[r.locale,r.locale===n&&e.jsx("span",{className:"ml-1 text-muted-foreground",children:"★"})]}),e.jsxs("span",{className:"text-muted-foreground",children:[r.translated,"/",r.total," (",r.percent,"%)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 flex-1 overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:`h-full rounded-full transition-all ${r.percent===100?"bg-green-500":r.percent>=80?"bg-blue-500":r.percent>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${r.percent}%`}})}),r.missing>0&&t&&e.jsxs(y,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-[10px]",onClick:()=>t(r.locale),children:[r.missing," ",i("i18n.missing")]})]})]},r.locale))}),m.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:m.map(([r,g])=>e.jsxs(P,{variant:"outline",className:"text-[10px]",children:[r," ",e.jsx("span",{className:"ml-1 text-muted-foreground",children:g})]},r))})]})}function Ve({open:t,customCategories:i,onConfirm:a,onCancel:n}){const l=W(),c=[...Z,...i],[s,m]=h.useState(c[0]??"ui"),[u,f]=h.useState(""),r=h.useCallback(()=>{const d=u.trim();d&&(a(`${s}.${d}`,s),m(c[0]??"ui"),f(""))},[s,u,a,c]),g=h.useCallback(()=>{n(),m(c[0]??"ui"),f("")},[n,c]);return e.jsx(ge,{open:t,onOpenChange:d=>{d||g()},children:e.jsxs(je,{showCloseButton:!1,className:"w-80 max-w-[calc(100vw-2rem)] rounded-xl p-5 gap-4",children:[e.jsx(ye,{className:"items-center",children:e.jsx(be,{className:"text-base",children:l("i18n.addKey")})}),e.jsxs("div",{className:"flex items-center gap-0",children:[e.jsxs(J,{children:[e.jsx(H,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:"h-9 rounded-r-none border-r-0 px-2.5 text-sm font-mono shrink-0",children:[s,e.jsx(Ce,{className:"ml-1 size-3 text-muted-foreground"})]})}),e.jsxs(V,{align:"start",children:[Z.map(d=>e.jsx(w,{onClick:()=>m(d),children:d},d)),i.length>0&&e.jsx($,{}),i.map(d=>e.jsx(w,{onClick:()=>m(d),children:d},d))]})]}),e.jsx("span",{className:"flex h-9 items-center border-y bg-muted px-1 text-sm text-muted-foreground font-mono",children:"."}),e.jsx(Ne,{autoFocus:!0,className:"h-9 rounded-l-none font-mono text-sm",placeholder:"start_button",value:u,onChange:d=>f(d.target.value),onKeyDown:d=>{d.key==="Enter"&&u.trim()&&r(),d.key==="Escape"&&g()}})]}),e.jsxs("p",{className:"text-center text-xs text-muted-foreground font-mono",children:[s,".",u||"…"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{variant:"outline",className:"flex-1",onClick:g,children:l("common.cancel")}),e.jsx(y,{className:"flex-1",disabled:!u.trim(),onClick:r,children:l("common.confirm")})]})]})})}function We(t){const i=[];for(const a of t.nodes)if(a.type==="text"&&a.data.textKey&&i.push(a.data.textKey),a.type==="choice")for(const n of a.data.options)n.textKey&&i.push(n.textKey);return i}function qe(t){const i=t.schema.columns.filter(n=>n.type==="i18n-key").map(n=>n.id);if(i.length===0)return[];const a=[];for(const n of t.rows)for(const l of i){const c=n.cells[l];typeof c=="string"&&c&&a.push(c)}return a}function Ge(t,i){const a=[],n=We(t);for(const l of n)i.has(l)||(a.push({key:l,category:"dialogue",sourceDocId:t.id}),i.add(l));return a}function Ue(t,i){const a=[],n=t.metadata.category==="quest"?"quest":t.metadata.category==="achievement"?"achievement":t.metadata.category==="item"?"item":t.metadata.category==="skill"?"skill":"ui",l=qe(t);for(const c of l)i.has(c)||(a.push({key:c,category:n,sourceDocId:t.id}),i.add(c));return a}const Ye=["all","missing","draft","translated","reviewed","final"],de=[{code:"zh-TW",label:"繁體中文"},{code:"zh-CN",label:"简体中文"},{code:"en",label:"English"},{code:"ja",label:"日本語"},{code:"ko",label:"한국어"}],re=new Set(de.map(t=>t.code));function os(){const t=W(),{id:i}=ve(),{documents:a,open:n,create:l,currentDocument:c}=ke(),s=q(),m=we(),[u,f]=h.useState(!1),[r,g]=h.useState(!1),[d,C]=h.useState(!1);h.useEffect(()=>{if(!i)return;const o=a.filter(p=>p.type==="i18n");o.length>0?n(o[0].id):l(i,"i18n","Localization")},[i]),h.useEffect(()=>{if(c?.type==="i18n"){const o=c,p=o.locales?.length?o.locales:[o.locale];s.load(p,o.locale,o.entries,o.customCategories)}return()=>{s.reset()}},[c?.id]);const R=h.useRef(c);R.current=c;const G=h.useMemo(()=>{const o=R.current;if(!o||o.type!=="i18n")return null;const p=[];for(const[v,L]of s.entries){const k=s.meta.get(v),E=L.get(s.baseLocale)??"",S={};for(const[X,ee]of L)X!==s.baseLocale&&ee&&(S[X]=ee);p.push({key:v,value:E,translations:Object.keys(S).length>0?S:void 0,category:k?.category??"ui",context:k?.context,maxLength:k?.maxLength,status:k?.status??"draft",updatedAt:Date.now()})}return{...o,locale:s.baseLocale,locales:s.locales,entries:p,customCategories:s.customCategories.length>0?s.customCategories:void 0,updatedAt:Date.now()}},[c?.id,s.entries,s.meta,s.baseLocale,s.locales,s.customCategories]);Ke(G);const N=h.useCallback((o,p)=>{s.addKey(o,p),f(!1)},[s]),_=h.useCallback(o=>{s.addLocale(o)},[s]),B=h.useCallback(async()=>{const o=await m({title:t("i18n.addLocale"),placeholder:"fr / de / pt-BR"});o&&s.addLocale(o)},[s,m,t]),I=h.useCallback(async()=>{const o=await m({title:t("i18n.addCategory"),placeholder:"lore / menu / npc"});o&&s.addCategory(o)},[s,m,t]),T=h.useCallback((o,p)=>{try{const v=JSON.parse(o),L=p.replace(/\.json$/,"");s.importLocale(L,v)}catch{}},[s]),O=h.useCallback(o=>{const p=s.exportLocale(o);te(`${o}.json`,p)},[s]),A=h.useCallback(()=>{for(const o of s.locales){const p=s.exportLocale(o);te(`${o}.json`,p)}},[s]),x=h.useMemo(()=>[{key:"ie.importJson",icon:U,accept:".json",onImport:T}],[T]),M=h.useMemo(()=>{const o=s.locales.map(p=>({key:`${p}.json`,icon:U,onClick:()=>O(p)}));return s.locales.length>1&&o.push({key:"i18n.exportAll",icon:U,onClick:A}),o},[s.locales,O,A]),j=h.useCallback(async()=>{if(!(!i||d)){C(!0);try{const o=await Y.listDocuments(i),p=new Set(s.entries.keys());let v=0;for(const L of o){if(L.type==="dialogue"){const k=await Y.loadDocument(L.id);if(k){const E=Ge(k,p);for(const S of E)s.addKey(S.key,S.category);v+=E.length}}if(L.type==="datatable"){const k=await Y.loadDocument(L.id);if(k){const E=Ue(k,p);for(const S of E)s.addKey(S.key,S.category);v+=E.length}}}v>0&&console.info(`[i18n] Synced ${v} new keys from dialogue/datatable`)}finally{C(!1)}}},[i,d,s]),b=h.useCallback(o=>{s.setFilterStatus("missing"),g(!1)},[s]);return Me(c?e.jsxs(e.Fragment,{children:[e.jsx(Te,{value:s.filterSearch,onChange:s.setFilterSearch,placeholder:t("table.search")}),e.jsx(F,{orientation:"vertical",className:"mx-0.5 h-6"}),e.jsxs(J,{children:[e.jsxs(z,{children:[e.jsx(K,{asChild:!0,children:e.jsx(H,{asChild:!0,children:e.jsx(y,{variant:s.filterCategory!=="all"?"secondary":"ghost",size:"icon",className:"size-9",children:e.jsx(Ae,{className:"size-4"})})})}),e.jsx(D,{side:"top",children:t("i18n.allCategories")})]}),e.jsxs(V,{side:"top",align:"start",children:[e.jsx(w,{onClick:()=>s.setFilterCategory("all"),children:t("i18n.allCategories")}),Z.map(o=>e.jsx(w,{onClick:()=>s.setFilterCategory(o),children:o},o)),s.customCategories.length>0&&e.jsx($,{}),s.customCategories.map(o=>e.jsx(w,{onClick:()=>s.setFilterCategory(o),children:o},o)),e.jsx($,{}),e.jsxs(w,{onClick:I,children:[e.jsx(ae,{className:"mr-2 size-3.5"}),t("i18n.customCategory")]})]})]}),e.jsxs(J,{children:[e.jsxs(z,{children:[e.jsx(K,{asChild:!0,children:e.jsx(H,{asChild:!0,children:e.jsx(y,{variant:s.filterStatus!=="all"?"secondary":"ghost",size:"icon",className:"size-9",children:e.jsx(Fe,{className:"size-4"})})})}),e.jsx(D,{side:"top",children:t("i18n.allStatuses")})]}),e.jsx(V,{side:"top",align:"start",children:Ye.map(o=>e.jsx(w,{onClick:()=>s.setFilterStatus(o),children:t(o==="all"?"i18n.allStatuses":`i18n.status.${o}`)},o))})]}),e.jsx(F,{orientation:"vertical",className:"mx-0.5 h-6"}),e.jsxs(z,{children:[e.jsx(K,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"size-9",onClick:()=>f(!0),children:e.jsx(Le,{className:"size-4"})})}),e.jsx(D,{side:"top",children:t("i18n.addKey")})]}),e.jsxs(J,{children:[e.jsxs(z,{children:[e.jsx(K,{asChild:!0,children:e.jsx(H,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"size-9",children:e.jsx(Se,{className:"size-4"})})})}),e.jsx(D,{side:"top",children:t("i18n.addLocale")})]}),e.jsxs(V,{side:"top",align:"start",children:[de.map(o=>{const p=s.locales.includes(o.code);return e.jsxs(w,{disabled:p,onClick:()=>{p||_(o.code)},children:[e.jsxs("span",{className:p?"text-muted-foreground":"",children:[o.code," — ",o.label]}),p&&e.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"✓"})]},o.code)}),s.locales.some(o=>!re.has(o))&&e.jsx($,{}),s.locales.filter(o=>!re.has(o)).map(o=>e.jsxs(w,{disabled:!0,children:[e.jsx("span",{className:"text-muted-foreground",children:o}),e.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:"✓"})]},o)),e.jsx($,{}),e.jsxs(w,{onClick:B,children:[e.jsx(ae,{className:"mr-2 size-3.5"}),t("i18n.customLocale")]})]})]}),e.jsx(F,{orientation:"vertical",className:"mx-0.5 h-6"}),e.jsx(De,{imports:x,exports:M}),e.jsx(F,{orientation:"vertical",className:"mx-0.5 h-6"}),e.jsxs(z,{children:[e.jsx(K,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"icon",className:"size-9",disabled:d,onClick:j,children:e.jsx(ze,{className:`size-4 ${d?"animate-spin":""}`})})}),e.jsx(D,{side:"top",children:t("i18n.syncKeys")})]}),e.jsxs(z,{children:[e.jsx(K,{asChild:!0,children:e.jsx(y,{variant:r?"secondary":"ghost",size:"icon",className:"size-9",onClick:()=>g(o=>!o),children:e.jsx($e,{className:"size-4"})})}),e.jsx(D,{side:"top",children:t("i18n.dashboard")})]}),e.jsx(Ee,{section:"本地化管理"})]}):null,[c,s.filterSearch,s.filterCategory,s.filterStatus,s.locales,s.customCategories,_,B,I,x,M,j,d,r,t]),c?e.jsxs("div",{className:"flex h-full flex-col",children:[r&&e.jsx(He,{onJumpToMissing:b}),e.jsx(Je,{}),e.jsx(Ve,{open:u,customCategories:s.customCategories,onConfirm:N,onCancel:()=>f(!1)})]}):null}export{os as default};
